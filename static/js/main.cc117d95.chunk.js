(this.webpackJsonptest_yarandin_starwars=this.webpackJsonptest_yarandin_starwars||[]).push([[0],{28:function(e,t,a){e.exports=a(47)},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),s=a.n(c),l=a(10),i=a(5),m=a(6),o=a(8),u=a.n(o),f=a(11),p=a(23),d=a(24),h=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"getResource",value:function(){var e=Object(f.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://swapi.co/api").concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch");case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(e){return this.getResource(e)}}]),e}(),_=a(15),E=a(25),b=a.n(E),g=function(e){var t=e.films,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(n.useState)(""),f=Object(i.a)(u,2),p=f[0],d=f[1],h=b()(d,1e3),E=Object(m.g)(),g=Object(m.f)(),N=p?t.filter((function(e){return e.title.toLowerCase().includes(p.toLowerCase())})):t,O=new URLSearchParams(E.search),v="",j=O.get("sort");v=j?"number"===typeof t[0][j]||"boolean"===typeof t[0][j]?Object(_.a)(N).sort((function(e,t){return(e[j]-t[j])*("asc"===O.get("orderOfSorting")?1:-1)})):Object(_.a)(N).sort((function(e,t){return e[j].localeCompare(t[j])*("asc"===O.get("orderOfSorting")?1:-1)})):N;return r.a.createElement("main",{className:"main"},r.a.createElement("div",{className:"stars"}),r.a.createElement("div",{className:"clouds"}),r.a.createElement("h1",{className:"main__heading"},"Star wars universe"),r.a.createElement("div",{className:"main__search"},r.a.createElement("input",{type:"text",placeholder:"Search...",value:s,onChange:function(e){h(e.target.value),o(e.target.value)}}),r.a.createElement("button",{className:"button",type:"button",onClick:function(){return e="title",O.set("sort",e),O.get("sort")===e&&"asc"===O.get("orderOfSorting")?O.set("orderOfSorting","desc"):O.set("orderOfSorting","asc"),void g.push({search:O.toString()});var e}},"Sort")),r.a.createElement("section",{className:"films"},v.map((function(e){return r.a.createElement(l.b,{to:"/".concat(e.episode_id),className:"films__link",key:e.title},r.a.createElement("article",{className:"films__article"},r.a.createElement("h2",{className:"films__heading"},e.title)))}))))},N=function(e){var t=e.id,a=e.films,c=JSON.parse(a).find((function(e){return e.episode_id===+t})),s=Object(n.useState)([]),l=Object(i.a)(s,2),m=l[0],o=l[1],p=Object(n.useState)([]),d=Object(i.a)(p,2),h=d[0],_=d[1],E=Object(n.useState)([]),b=Object(i.a)(E,2),g=b[0],N=b[1],O=c.characters,v=c.planets,j=c.starships;function S(e,t){return y.apply(this,arguments)}function y(){return(y=Object(f.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return fetch(e).then((function(e){return e.json()}))})));case 2:n=e.sent,r=JSON.stringify(n,null,2),a(JSON.parse(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){S(O,o),S(v,_),S(j,N)}),[]),r.a.createElement("section",{className:"episode"},0!==m.length&&0!==h.length&&0!==g.length?r.a.createElement("section",{className:"film"},r.a.createElement("h1",{className:"film__heading"},c.title),r.a.createElement("article",{className:"film__prev"},r.a.createElement("p",{className:"film__text"},c.opening_crawl)),r.a.createElement("p",{className:"film__paragraph"},r.a.createElement("span",null,"Director:")," ".concat(c.director)),r.a.createElement("p",{className:"film__paragraph"},r.a.createElement("span",null,"Producer:")," ".concat(c.producer)),r.a.createElement("p",{className:"film__paragraph"},r.a.createElement("span",null,"Release date:")," ".concat(c.release_date)),r.a.createElement("div",{className:"film__details details"},r.a.createElement("div",{className:"details__block"},r.a.createElement("h3",{className:"details__head"},"Heroes"),m.map((function(e){return r.a.createElement("h4",{key:e.name,className:"details_heading"},e.name)}))),r.a.createElement("div",{className:"details__block"},r.a.createElement("h3",{className:"details__head"},"Planets"),h.map((function(e){return r.a.createElement("h4",{key:e.name,className:"details_heading"},e.name)}))),r.a.createElement("div",{className:"details__block"},r.a.createElement("h3",{className:"details__head"},"Starships"),g.map((function(e){return r.a.createElement("h4",{key:e.name,className:"details_heading"},e.name)}))))):r.a.createElement("section",{className:"section_spinner"},r.a.createElement("div",{className:"spinner"})))},O=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=new h;return Object(n.useEffect)((function(){s.getAll("/films/").then((function(e){c(e.results)}))}),[]),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(g,{films:a})),r.a.createElement(m.a,{path:"/:id",render:function(e){var t=e.match.params.id;return r.a.createElement(N,{id:t,films:JSON.stringify(a)})}}))};a(46);s.a.render(r.a.createElement(l.a,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.cc117d95.chunk.js.map