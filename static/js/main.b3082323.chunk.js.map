{"version":3,"sources":["api/dataApi.js","components/home/home.js","components/Episode/episode.js","App.js","index.js"],"names":["GetData","URL","fetch","res","ok","Error","json","this","getResource","Home","films","useState","visibleQuery","setVisibleQuery","searchQuery","setSearchQuery","debouncedSetQuery","debounce","filmsAfterQuery","filter","item","title","toLowerCase","includes","sortedFilms","className","type","placeholder","value","onChange","evt","target","onClick","sort","a","b","localeCompare","map","film","to","episode_id","key","Episode","id","JSON","parse","find","persons","setPersons","planets","setPlanets","starships","setStarships","urlsCharacters","characters","urlsPlanets","urlsStarships","fetchData","arr","setFunc","Promise","all","url","then","r","results","stringify","useEffect","length","opening_crawl","director","producer","release_date","person","name","planet","ship","App","setFilms","filmsFromServer","getAll","data","exact","path","render","match","params","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b3082323.chunk.js","sourcesContent":["const apiBase = 'https://swapi.co/api';\n\nclass GetData {\n  async getResource(URL) {\n    const res = await fetch(`${apiBase}${URL}`);\n    if (!res.ok) {\n      throw new Error('Could not fetch');\n    }\n\n    return res.json();\n  }\n\n  getAll(URL) {\n    return this.getResource(URL);\n  }\n}\n\nexport default GetData;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport debounce from 'lodash/debounce';\n\nconst Home = ({ films }) => {\n  const [visibleQuery, setVisibleQuery] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const debouncedSetQuery = debounce(setSearchQuery, 1000);\n\n  const handleChangeQuery = (evt) => {\n    debouncedSetQuery(evt.target.value);\n    setVisibleQuery(evt.target.value);\n  };\n\n  const filmsAfterQuery = !searchQuery\n    ? films\n    : films.filter((item) => item.title.toLowerCase()\n      .includes(searchQuery.toLowerCase()));\n\n  const sortedFilms = [...filmsAfterQuery];\n\n  return (\n    <main className=\"main\">\n      <div className=\"stars\" />\n      <div className=\"clouds\" />\n      <h1 className=\"main__heading\">\n        Star wars universe\n      </h1>\n      <div className=\"main__search\">\n        <input\n          type=\"text\"\n          placeholder=\"Search...\"\n          value={visibleQuery}\n          onChange={handleChangeQuery}\n        />\n\n        <button\n          className=\"button\"\n          type=\"button\"\n          onClick={() => sortedFilms.sort((a, b) => a.title.localeCompare(b.title))}\n        >\n          Sort\n        </button>\n      </div>\n      <section className=\"films\">\n        {sortedFilms.map((film) => (\n          <Link\n            to={`/${film.episode_id}`}\n            className=\"films__link\"\n            key={film.episode_id}\n          >\n            <article\n              className=\"films__article\"\n            >\n              <h2\n                className=\"films__heading\"\n              >\n                {film.title}\n              </h2>\n            </article>\n          </Link>\n        ))}\n      </section>\n    </main>\n  );\n};\n\nHome.propTypes = {\n  films: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default Home;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\n\nconst Episode = ({ id, films }) => {\n  const film = JSON.parse(films).find((item) => item.episode_id === +id);\n\n  const [persons, setPersons] = useState([]);\n  const [planets, setPlanets] = useState([]);\n  const [starships, setStarships] = useState([]);\n\n  const urlsCharacters = film.characters;\n  const urlsPlanets = film.planets;\n  const urlsStarships = film.starships;\n\n  async function fetchData(arr, setFunc) {\n    const results = await Promise.all(arr\n      .map((url) => fetch(url).then((r) => r.json())));\n    const res = JSON.stringify(results, null, 2);\n    setFunc(JSON.parse(res));\n  }\n\n  useEffect(() => {\n    fetchData(urlsCharacters, setPersons);\n    fetchData(urlsPlanets, setPlanets);\n    fetchData(urlsStarships, setStarships);\n  }, []);\n\n  return (\n    <section className=\"episode\">\n      {persons.length !== 0 && planets.length !== 0 && starships.length !== 0 ? (\n        <section className=\"film\">\n          <h1 className=\"film__heading\">{film.title}</h1>\n          <article className=\"film__prev\">\n            <p className=\"film__text\">\n              {film.opening_crawl}\n            </p>\n          </article>\n\n          <p className=\"film__paragraph\">\n            <span>\n              Director:\n            </span>\n            {` ${film.director}`}\n          </p>\n\n          <p className=\"film__paragraph\">\n            <span>\n              Producer:\n            </span>\n            {` ${film.producer}`}\n          </p>\n\n          <p className=\"film__paragraph\">\n            <span>Release date:</span>\n            {` ${film.release_date}`}\n          </p>\n\n          <div className=\"film__details details\">\n\n            <div className=\"details__block\">\n              <h3 className=\"details__head\">Heroes</h3>\n              {persons.map((person) => (\n                <h4\n                  key={person.name}\n                  className=\"details_heading\"\n                >\n                  {person.name}\n                </h4>\n              ))}\n            </div>\n\n            <div className=\"details__block\">\n              <h3 className=\"details__head\">Planets</h3>\n              {planets.map((planet) => (\n                <h4\n                  key={planet.name}\n                  className=\"details_heading\"\n                >\n                  {planet.name}\n                </h4>\n              ))}\n            </div>\n\n            <div className=\"details__block\">\n              <h3 className=\"details__head\">Starships</h3>\n              {starships.map((ship) => (\n                <h4\n                  key={ship.name}\n                  className=\"details_heading\"\n                >\n                  {ship.name}\n                </h4>\n              ))}\n            </div>\n\n          </div>\n        </section>\n      ) : (\n        <section className=\"section_spinner\">\n          <div className=\"spinner\" />\n        </section>\n      )}\n    </section>\n  );\n};\n\nEpisode.propTypes = {\n  films: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n};\n\nexport default Episode;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport GetData from './api/dataApi';\nimport Home from './components/home/home';\nimport Episode from './components/Episode/episode';\n\nconst App = () => {\n  const [films, setFilms] = useState([]);\n  const filmsFromServer = new GetData();\n\n  useEffect(() => {\n    filmsFromServer.getAll('/films/').then((data) => {\n      setFilms(data.results);\n    });\n  }, []);\n\n\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Home\n          films={films}\n        />\n      </Route>\n\n      <Route\n        path=\"/:id\"\n        render={({ match }) => {\n          const { id } = match.params;\n          return (\n            <Episode\n              id={id}\n              films={JSON.stringify(films)}\n            />\n          );\n        }}\n      />\n\n    </Switch>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\nimport './styles/App.scss';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}