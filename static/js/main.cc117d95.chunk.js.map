{"version":3,"sources":["api/dataApi.js","components/home/home.js","components/Episode/episode.js","App.js","index.js"],"names":["GetData","URL","fetch","res","ok","Error","json","this","getResource","Home","films","useState","visibleQuery","setVisibleQuery","searchQuery","setSearchQuery","debouncedSetQuery","debounce","location","useLocation","history","useHistory","filmsAfterQuery","filter","item","title","toLowerCase","includes","searchParams","URLSearchParams","search","sortedFilms","sortParam","get","sort","a","b","localeCompare","className","type","placeholder","value","onChange","evt","target","onClick","param","set","push","toString","map","film","to","episode_id","key","Episode","id","JSON","parse","find","persons","setPersons","planets","setPlanets","starships","setStarships","urlsCharacters","characters","urlsPlanets","urlsStarships","fetchData","arr","setFunc","Promise","all","url","then","r","results","stringify","useEffect","length","opening_crawl","director","producer","release_date","person","name","planet","ship","App","setFilms","filmsFromServer","getAll","data","exact","path","render","match","params","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.cc117d95.chunk.js","sourcesContent":["const apiBase = 'https://swapi.co/api';\n\nclass GetData {\n  async getResource(URL) {\n    const res = await fetch(`${apiBase}${URL}`);\n    if (!res.ok) {\n      throw new Error('Could not fetch');\n    }\n\n    return res.json();\n  }\n\n  getAll(URL) {\n    return this.getResource(URL);\n  }\n}\n\nexport default GetData;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, useLocation, useHistory } from 'react-router-dom';\nimport debounce from 'lodash/debounce';\n\nconst Home = ({ films }) => {\n  const [visibleQuery, setVisibleQuery] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const debouncedSetQuery = debounce(setSearchQuery, 1000);\n  const location = useLocation();\n  const history = useHistory();\n\n  const handleChangeQuery = (evt) => {\n    debouncedSetQuery(evt.target.value);\n    setVisibleQuery(evt.target.value);\n  };\n\n  const filmsAfterQuery = !searchQuery\n    ? films\n    : films.filter((item) => item.title.toLowerCase()\n      .includes(searchQuery.toLowerCase()));\n\n\n  const searchParams = new URLSearchParams(location.search);\n\n  let sortedFilms = '';\n\n  const sortParam = searchParams.get('sort');\n\n  if (sortParam) {\n    sortedFilms = (typeof films[0][sortParam] === 'number'\n            || typeof films[0][sortParam] === 'boolean')\n      ? [...filmsAfterQuery]\n        .sort((a, b) => (a[sortParam] - b[sortParam])\n                    * (searchParams.get('orderOfSorting') === 'asc' ? 1 : -1))\n      : [...filmsAfterQuery]\n        .sort((a, b) => (a[sortParam].localeCompare(b[sortParam]))\n                    * (searchParams.get('orderOfSorting') === 'asc' ? 1 : -1));\n  } else {\n    sortedFilms = filmsAfterQuery;\n  }\n\n  const sortFilms = (param) => {\n    searchParams.set('sort', param);\n\n    if (searchParams.get('sort') === param\n            && searchParams.get('orderOfSorting') === 'asc') {\n      searchParams.set('orderOfSorting', 'desc');\n    } else {\n      searchParams.set('orderOfSorting', 'asc');\n    }\n\n    history.push({ search: searchParams.toString() });\n  };\n\n  return (\n    <main className=\"main\">\n      <div className=\"stars\" />\n      <div className=\"clouds\" />\n      <h1 className=\"main__heading\">\n        Star wars universe\n      </h1>\n      <div className=\"main__search\">\n        <input\n          type=\"text\"\n          placeholder=\"Search...\"\n          value={visibleQuery}\n          onChange={handleChangeQuery}\n        />\n\n        <button\n          className=\"button\"\n          type=\"button\"\n          onClick={() => sortFilms('title')}\n        >\n          Sort\n        </button>\n      </div>\n      <section className=\"films\">\n        {sortedFilms.map((film) => (\n          <Link\n            to={`/${film.episode_id}`}\n            className=\"films__link\"\n            key={film.title}\n          >\n            <article\n              className=\"films__article\"\n            >\n              <h2\n                className=\"films__heading\"\n              >\n                {film.title}\n              </h2>\n            </article>\n          </Link>\n        ))}\n      </section>\n    </main>\n  );\n};\n\nHome.propTypes = {\n  films: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default Home;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\n\nconst Episode = ({ id, films }) => {\n  const film = JSON.parse(films).find((item) => item.episode_id === +id);\n\n  const [persons, setPersons] = useState([]);\n  const [planets, setPlanets] = useState([]);\n  const [starships, setStarships] = useState([]);\n\n  const urlsCharacters = film.characters;\n  const urlsPlanets = film.planets;\n  const urlsStarships = film.starships;\n\n  async function fetchData(arr, setFunc) {\n    const results = await Promise.all(arr\n      .map((url) => fetch(url).then((r) => r.json())));\n    const res = JSON.stringify(results, null, 2);\n    setFunc(JSON.parse(res));\n  }\n\n  useEffect(() => {\n    fetchData(urlsCharacters, setPersons);\n    fetchData(urlsPlanets, setPlanets);\n    fetchData(urlsStarships, setStarships);\n  }, []);\n\n  return (\n    <section className=\"episode\">\n      {persons.length !== 0 && planets.length !== 0 && starships.length !== 0 ? (\n        <section className=\"film\">\n          <h1 className=\"film__heading\">{film.title}</h1>\n          <article className=\"film__prev\">\n            <p className=\"film__text\">\n              {film.opening_crawl}\n            </p>\n          </article>\n\n          <p className=\"film__paragraph\">\n            <span>\n              Director:\n            </span>\n            {` ${film.director}`}\n          </p>\n\n          <p className=\"film__paragraph\">\n            <span>\n              Producer:\n            </span>\n            {` ${film.producer}`}\n          </p>\n\n          <p className=\"film__paragraph\">\n            <span>Release date:</span>\n            {` ${film.release_date}`}\n          </p>\n\n          <div className=\"film__details details\">\n\n            <div className=\"details__block\">\n              <h3 className=\"details__head\">Heroes</h3>\n              {persons.map((person) => (\n                <h4\n                  key={person.name}\n                  className=\"details_heading\"\n                >\n                  {person.name}\n                </h4>\n              ))}\n            </div>\n\n            <div className=\"details__block\">\n              <h3 className=\"details__head\">Planets</h3>\n              {planets.map((planet) => (\n                <h4\n                  key={planet.name}\n                  className=\"details_heading\"\n                >\n                  {planet.name}\n                </h4>\n              ))}\n            </div>\n\n            <div className=\"details__block\">\n              <h3 className=\"details__head\">Starships</h3>\n              {starships.map((ship) => (\n                <h4\n                  key={ship.name}\n                  className=\"details_heading\"\n                >\n                  {ship.name}\n                </h4>\n              ))}\n            </div>\n\n          </div>\n        </section>\n      ) : (\n        <section className=\"section_spinner\">\n          <div className=\"spinner\" />\n        </section>\n      )}\n    </section>\n  );\n};\n\nEpisode.propTypes = {\n  films: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n};\n\nexport default Episode;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport GetData from './api/dataApi';\nimport Home from './components/home/home';\nimport Episode from './components/Episode/episode';\n\nconst App = () => {\n  const [films, setFilms] = useState([]);\n  const filmsFromServer = new GetData();\n\n  useEffect(() => {\n    filmsFromServer.getAll('/films/').then((data) => {\n      setFilms(data.results);\n    });\n  }, []);\n\n\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Home\n          films={films}\n        />\n      </Route>\n\n      <Route\n        path=\"/:id\"\n        render={({ match }) => {\n          const { id } = match.params;\n          return (\n            <Episode\n              id={id}\n              films={JSON.stringify(films)}\n            />\n          );\n        }}\n      />\n\n    </Switch>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\nimport './styles/App.scss';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}